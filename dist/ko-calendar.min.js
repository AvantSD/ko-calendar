/*! ko-calendar */
(function(){var a="calendar",b=function(b){var c=this;return c.opts={value:ko.observable(),current:new Date,selected:null,deselectable:!0,showCalendar:!0,showToday:!0,showTime:!0,showNow:!0,militaryTime:!1,min:null,max:null},ko.utils.extend(c.opts,b),c.opts.showCalendar||c.opts.showTime?(c.strings={months:["January","February","March","April","May","June","July","August","September","October","November","December"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],time:["AM","PM"]},c.constants={daysInWeek:7,dayStringLength:2},c.utils={date:{normalize:function(a){var b=new Date(a.getTime());return b.setHours(0,0,0,0),b},isSame:function(a,b){return a&&b?a.getMonth()==b.getMonth()&&a.getDate()==b.getDate()&&a.getFullYear()==b.getFullYear():!1},isSameMonth:function(a,b){return a&&b?a.getMonth()==b.getMonth():!1},isWeekend:function(a){return a?0===a.getDay()||a.getDay()==c.constants.daysInWeek-1:!1},isWithinMinMaxDateRange:function(a){return a?c.opts.min||c.opts.max?c.opts.min&&c.utils.date.normalize(c.opts.min)>a?!1:c.opts.max&&c.utils.date.normalize(c.opts.max)<a?!1:!0:!0:!1}},time:{handleSuffixCheck:function(a){var b=a.getHours();return b>=12?b-=12:12>b&&(b+=12),a.setHours(b)},checkMinTimeRange:function(a){if(!a||!c.selected()||!c.opts.min&&!c.opts.max)return!1;var b=new Date(c.selected());return"hours"===a.type?b.setHours(b.getHours()-1):"minutes"===a.type?b.setMinutes(b.getMinutes()-1):"suffix"===a.type&&(b=c.utils.time.handleSuffixCheck(b)),c.opts.max&&c.opts.max<b?!0:c.opts.min&&c.opts.min>b?!0:!1},checkMaxTimeRange:function(a){if(!a||!c.selected()||!c.opts.min&&!c.opts.max)return!1;var b=new Date(c.selected());return"hours"===a.type?b.setHours(b.getHours()+1):"minutes"===a.type?b.setMinutes(b.getMinutes()+1):"suffix"===a.type&&(b=new Date(c.utils.time.handleSuffixCheck(b))),c.opts.min&&c.opts.min>b?!0:c.opts.max&&c.opts.max<b?!0:!1}},strings:{pad:function(a){return 10>a?"0"+a:a}},element:{offset:function(a){var b=a.getBoundingClientRect(),c=document.documentElement;return{top:b.top+window.pageYOffset-c.clientTop,left:b.left+window.pageXOffset-c.clientLeft}},height:function(a){return a.offsetHeight},isDescendant:function(a,b){for(var c=b.parentNode;null!==c;){if(c==a)return!0;c=c.parentNode}return!1}}},c.current=ko.observable(c.opts.current||new Date),c.selected=ko.observable(c.opts.selected),c.selected.subscribe(c.opts.value),c.opts.value(c.opts.selected),c.opts.showToday&&!c.utils.date.isWithinMinMaxDateRange(c.utils.date.normalize(new Date))&&(c.opts.showToday=!1),c.opts.showNow&&(c.opts.min&&c.opts.min>=new Date||c.opts.max&&c.opts.max<=new Date)&&(c.opts.showNow=!1),c.calendar={select:function(a){return c.opts.deselectable&&c.utils.date.isSame(c.selected(),a)?c.selected(null):void c.selected(new Date(c.opts.min&&c.utils.date.isSame(a,c.opts.min)?c.opts.min:a))},selectToday:function(){var a=c.utils.date.normalize(new Date);c.calendar.select(a),c.current(a)},next:function(){c.current(new Date(c.current().setMonth(c.current().getMonth()+1)))},prev:function(){c.current(new Date(c.current().setMonth(c.current().getMonth()-1)))},sheet:ko.computed(function(){var a=c.utils.date.normalize(c.current());a.setDate(1),a.setDate(a.getDate()-a.getDay());for(var b=[],d=0,e=!1,f=!1,g=!1;;){if(b[d]||(b[d]=[]),b[d].length!==c.constants.daysInWeek&&(b[d].push(new Date(a.getTime())),a.setDate(a.getDate()+1)),a.getMonth()==c.current().getMonth()&&(e=!0),e&&a.getMonth()!==c.current().getMonth()&&(f=!0),f&&b[d].length==c.constants.daysInWeek&&(g=!0),f&&g)break;b[d].length==c.constants.daysInWeek&&d++}return b})},c.time={next:function(a){return c.selected()?void c.selected(new Date(a.set(a.get()+1))):c.time.selectNow()},prev:function(a){return c.selected()?void c.selected(new Date(a.set(a.get()-1))):c.time.selectNow()},selectNow:function(){var a=new Date;c.selected(a),c.current(a)},sheet:ko.observableArray([{type:"hours",get:function(){return c.selected().getHours()},set:function(a){return c.selected().setHours(a)}},{type:"minutes",get:function(){return c.selected().getMinutes()},set:function(a){return c.selected().setMinutes(a)}}]),text:function(a){if(!c.selected())return"-";switch(a.type){case"suffix":return a.get()?c.strings.time[1]:c.strings.time[0];case"hours":var b=a.get();return!c.opts.militaryTime&&(b>12||0===b)&&(b-=12),Math.abs(b);default:return c.utils.strings.pad(a.get())}}},c.opts.militaryTime||c.time.sheet.push({type:"suffix",get:function(){return c.selected()&&c.selected().getHours()<12?0:1},set:function(){var a=c.selected().getHours();return a>=12?a-=12:12>a&&(a+=12),c.selected().setHours(a)}}),void(c.visible=ko.observable(!0))):void console.error("Silly goose, what are you using ko-%s for?",a)},c='<div class="ko-calendar" data-bind="with: $data, visible: (opts.showCalendar || opts.showTime && visible(), attr: { \'data-opts\': JSON.stringify(opts) } ">			<!-- ko if: opts.showCalendar -->			<table data-bind="css: { selected: selected } " class="calendar-sheet">				<thead>					<tr>						<th>							<a href="#" data-bind="click: calendar.prev" class="prev">&laquo;</a>						</th>						<th data-bind="attr: { colspan: constants.daysInWeek - 2 } ">							<b data-bind="text: strings.months[current().getMonth()] + \' \' + current().getFullYear()"></b>						</th>						<th>							<a href="#" data-bind="click: calendar.next" class="next">&raquo;</a>						</th>					</tr>					<tr data-bind="foreach: strings.days">						<th data-bind="text: $data.substring(0, $parents[1].constants.dayStringLength)"></th>					</tr>				</thead>				<tbody data-bind="foreach: calendar.sheet">					<tr class="week" data-bind="foreach: $data">						<td class="day" data-bind="css: { weekend: $parents[1].utils.date.isWeekend($data), today: $parents[1].utils.date.isSame(new Date(), $data), inactive: !($parents[1].utils.date.isSameMonth($parents[1].current(), $data)), outofrange: !($parents[1].utils.date.isWithinMinMaxDateRange($data)) } ">							<a href="javascript:;" data-bind="text: $data.getDate(), attr: { title: $data }, click: $parents[1].calendar.select, css: { active: $parents[1].utils.date.isSame($parents[1].selected(), $data) } "></a>						</td>					</tr>				</tbody>				<!-- ko if: opts.showToday -->					<tfoot>						<tr>							<td data-bind="attr: { colspan: constants.daysInWeek } ">								<a href="javascript:;" data-bind="click: calendar.selectToday">Today</a>							</td>						</tr>					</tfoot>				<!-- /ko -->			</table>			<!-- /ko -->			<!-- ko if: opts.showTime -->			<table class="time-sheet">				<tbody>					<tr data-bind="foreach: time.sheet">						<td data-bind="css: { outofrange: $parent.utils.time.checkMaxTimeRange($data) }">							<a href="#" class="up" data-bind="click: $parent.time.next"></a>						</td>					</tr>					<tr data-bind="foreach: time.sheet">						<td data-bind="css: { colon: $index() === 0, inactive: !$parent.selected() }, text: $parent.time.text($data)"></td>					</tr>					<tr data-bind="foreach: time.sheet">						<td data-bind="css: { outofrange: $parent.utils.time.checkMinTimeRange($data) }">							<a href="#" class="down" data-bind="click: $parent.time.prev"></a>						</td>					</tr>				</tbody>				<!-- ko if: opts.showNow -->					<tfoot>						<tr>							<td data-bind="attr: { colspan: time.sheet().length } ">								<a href="javascript:;" data-bind="click: time.selectNow">Now</a>							</td>						</tr>					</tfoot>				<!-- /ko -->			</table>			<!-- /ko -->		</div>';ko.components.register(a,{viewModel:b,template:c}),ko.bindingHandlers[a]={init:function(a,d){var e,f=ko.unwrap(d()),g=new b(f);if("INPUT"==a.tagName){var h=document.createElement("div");h.innerHTML=c,e=h.children[0],a.parentNode.insertBefore(e,a.nextSibling),g.visible(!1),ko.utils.registerEventHandler(a,"focus",function(){var b=g.utils.element.offset(a),c=g.utils.element.height(a);e.style.position="absolute",e.style.top=b.top+c+5+"px",e.style.left=b.left+"px",g.visible(!0)}),ko.utils.registerEventHandler(document,"mousedown",function(b){b.target==a||b.target==e||g.utils.element.isDescendant(e,b.target)?a.focus():g.visible(!1)})}else a.innerHTML=c,e=a.children[0];return console.log("w"),ko.applyBindings(g,e),{controlsDescendantBindings:!0}}},console.log("2")}).call(this);